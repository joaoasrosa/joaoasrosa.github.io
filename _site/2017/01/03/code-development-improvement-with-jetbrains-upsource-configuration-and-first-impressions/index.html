<p>We should seek excellence in our jobs, doesn't matter our line of work. As professionals, we should always aim to improve the quality of our outputs, either it is customer satisfaction, code quality or just faster builds and deployments.</p>
<p>As any developer knows, working with a Version Control System (VCS) is great, but it has some pain points. As an example, if you are working in a product framework and you have lots of branches, it's complicated to do cross-branch searches with parameters like commit comments, authors and time. Plus we have a strict rule of code reviews (what we call the 4 eyes rule) to assess the code standards and the implementation itself. The code review comments are on our ticket system, disconnected from the VCS (I know there are integrated systems, but for business reasons the products do not interact as we like).</p>
<p>To close this gap, improving the developers' performance, we did research for useful tools that can help us. The frontrunner was <a href="https://www.jetbrains.com/upsource/">UpSource</a> from JetBrains. UpSource supports most of the VCS, giving some cool visualisations, allowing us to do the code reviews and last but not the least provide us with a full range of searches over the code branches.</p>
<p>Before buying the license, we set up the free version of UpSource, and using Continuous Improvements techniques we start an experiment with of our development teams.</p>
<p>To configure UpSource (version 3.5.3597) we:</p>
<ul>
<li>Read the <a href="https://www.jetbrains.com/help/upsource/3.5/prerequisites.html">pre-requisites</a></li>
<li>Spin up a VM with CentOS 7</li>
<li>Install CentOS 7</li>
</ul>
<p>In the bash command line for the VM we:</p>
<ul>
<li>Update all packages<br />
<code>yum -y update</code></li>
<li>Install net-tools<br />
<code>yum install net-tools</code></li>
<li>Install wget<br />
<code>yum install wget</code></li>
<li>Install unzip<br />
<code>yum install unzip</code></li>
<li>Download UpSource<br />
<code>wget https://download.jetbrains.com/upsource/upsource-3.5.3597.zip</code></li>
<li>Unzip it<br />
<code>unzip upsource-3.5.3597.zip -d /usr/local</code></li>
<li>Set the Linux configuration per <a href="https://www.jetbrains.com/help/upsource/3.5/things-to-configure-before-starting-upsource.html">UpSource recommendations</a> (using vi in my case)</li>
<li>Restart the machine to enforce the changes<br />
<code>shutdown -r now</code></li>
<li>Set up the machine name to access it using the FQDN<br />
<code>hostnameclt set-hostname my_machine_name</code></li>
<li>Open the firewall port 8080<br />
<code>firewall-cmd --zone=public --add-port=8080/tcp --permanent</code><br />
<code>firewall-cmd --reload</code></li>
<li>Start UpSource<br />
<code>/usr/local/upsource-3.5.3597/bin/upsource.sh start</code></li>
</ul>
<p>Using a browser we:</p>
<ul>
<li>Navigate to http://my_machine_name:8080</li>
<li>Login as admin</li>
<li>Change the settings to use our Active Directory Domain as authentication provider
<ul>
<li>Navigate to the Hub</li>
<li>Under the Access Management, navigate to Auth Modules</li>
<li>Click in Add Module and select Active Directory</li>
<li>Fill all the input fields with the Active Directory Domain information</li>
<li>Click in Create Module</li>
</ul>
</li>
<li>Configure the e-mail provider
<ul>
<li>Navigate to the Hub</li>
<li>Under the Server Settings, navigate to System Settings</li>
<li>Enable the Email notifications and fill all the input fields for the e-mail settings</li>
<li>Test an email to make sure the configuration is correct</li>
</ul>
</li>
<li>Configure the UpSource project to analyse our branches</li>
</ul>
<p>And at this point, we hit a roadblock... The certificate use by the VCS is self-signed. To fix it, we applied the following recipe:</p>
<ul>
<li>Get the self-signed certificate</li>
<li>Upload it to the UpSource machine</li>
<li>Following the <a href="https://upsource-support.jetbrains.com/hc/en-us/articles/206545609-Using-a-self-signed-certificate-to-connect-to-a-VCS-server">instructions</a> provided by JetBrains support</li>
</ul>
<p>And UpSource started to get all the information of the configured branches. :)</p>
<p>As a security measure, we enabled HTTPS following these <a href="https://www.jetbrains.com/help/upsource/2.0/proxy_configuration.html">instructions</a>. We close the shop, go home, take a good rest and start using it in the next day, using the rules agreed between the teams' technical leads.</p>
<p>After a week of usage, we start to see the benefits. We can search the code and the reviews in a faster way, leveraging the index system of UpSource. Plus we have visualisations that help us to identify what are the commits without reviews. In one particular situation, we found one optimisation broke our verifications in one of the plugins. Due to the search and comparison capabilities of UpSource, we cross-reference between different branches, identifying the bug and fixing it in a matter of minutes. If we use the tools provided by the VCS it will take a couple of hours to do the same job.</p>
<p>Our plan is to keep the experience with the team, refining the development process, since we change the way of doing code reviews. So far, we like the tool, and we are looking for the integration with <a href="https://youtrack.jetbrains.com/issue/UP-4138">Visual Studio</a>. After we agree and settle on the process, we will roll out to all the development teams within the company.</p>
